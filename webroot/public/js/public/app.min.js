<<<<<<< HEAD
function addToCart(e,t){if($(".added-to-basket").hide(),"undefined"!=typeof e&&"undefined"!=typeof t){var o;if(t)o={id:e};else{$(".clothing-add-button").html("Processing..."),$(".clothing-add-button").attr("disabled","disabled").addClass("disable");var n=$("#clothe-product-quantity").val(),i=$("#clothe-product-color").val(),a=$("#clothe-product-size").val();if(""==n||""==i||0==i||""==a||0==a||"undefined"==typeof i||"undefined"==typeof a)return $(".clothing-add-button").html("Add to basket"),$(".clothing-add-button").removeAttr("disabled").removeClass("disable"),$(".added-to-basket").html('<span class="glyphicon glyphicon-remove"></span> Please select the desired color and size.').fadeIn("fast"),!1;o={id:e,quantity:n,attr:{color:i,size:a}}}$.ajax({url:"/basket/add",method:"post",data:o,beforeSend:function(){}}).done(function(e){1==e.status&&"undefined"!=typeof e.data.items_count?($(".basket-counter").text(e.data.items_count),$(".added-to-basket").html('<span class="glyphicon glyphicon-ok"></span> Added to basket').fadeIn("fast")):$(".added-to-basket").html('<span class="glyphicon glyphicon-remove"></span> There has been an error').fadeIn("fast")}).fail(function(e){$(".added-to-basket").html('<span class="glyphicon glyphicon-remove"></span> There has been an error').fadeIn("fast")}).always(function(){$(".clothing-add-button").html("Add to basket"),$(".clothing-add-button").removeAttr("disabled").removeClass("disable")})}}function destroyCart(){confirm("Are you sure?")&&$.ajax({url:"/basket/destroy",method:"get",beforeSend:function(){}}).done(function(e){1==e.status?($(".cart-count").text(0),showNotification("All the products have been removed from the cart.","body","success","top","right","auto",null,!0)):showNotification(e.data.error_message,"body","danger","top","right","auto",null,!0)}).fail(function(e){showNotification(e.data.error_message,"body","danger","top","right","auto",null,!0)}).always(function(){})}function showNotification(e,t,o,n,i,a,r,s){r=null==r?concreteTimeDisplayed:r,setTimeout(function(){$.bootstrapGrowl(e,{ele:t,type:o,offset:{from:n,amount:20},align:i,width:a,delay:r,allow_dismiss:s})},1e3)}function headerBlockVideo(){this.headerBlock=$("#headerBlock"),this.headerBlock.length&&(this.videoHeaderContainerOuter=this.headerBlock.find("#videoHeaderContainerOuter"),this.videoHeaderContainer=this.videoHeaderContainerOuter.find("#videoHeaderContainer"),this.videoHeaderPlayButton=this.videoHeaderContainerOuter.find("#videoHeaderPlayButton"),this.videoInHeader=this.videoHeaderContainerOuter.find("#videoHeader"),this.videoInHeaderObj=this.videoInHeader.get(0),this.actions())}function dropDownSelect(){$allDropDownSelects=$(".dropDownSelect"),$allDropDownSelects.on("click",".dropdown-menu li a",function(){$dropDownSelect=$(this).parents(".dropdown");var e=$(this).text(),t=$(this).data("value");$dropDownSelect.find(".dropdown-toggle").html(e),$dropDownSelect.find('[name="'+$dropDownSelect.data("name")+'"]').val(t).trigger("change")})}function getMeCoveredSelects(){this.$getMeCoveredSelects=$("#getMeCoveredSelects"),this.$getMeCoveredSelects.length&&(this.$coverPriceOptionSelects=this.$getMeCoveredSelects.find(".coverPriceOptionSelect"),this.actions())}function postCodeDropDown(){this.$IinsurancePostCodeSelectContainer=$("#IinsurancePostCodeSelectContainer"),this.$postCodeDropDown=this.$IinsurancePostCodeSelectContainer.find("ul"),this.idOfSelect="____select_for____ILookForAddress",this.$postCodeSelect,this.actions()}function insuranceUpdatePrice(){var e=optionsPrice[$("#price_option_id").val()];if($("#pay_period").length)if("month"==$("#pay_period").val()){var t=parseFloat(70.5).toFixed(2),o=parseFloat((e-t)/11).toFixed(2);e='<span class="gold-color-txt inline-span">'+t+'</span> <span class="inline-span" style="color: #ffffff;">upfront and then 11 instalments equal to&nbsp;</span><span class="gold-color-txt inline-span">Â£'+o+"</span>"}else e=parseFloat(e).toFixed(0);$("#price_to_pay").html(e)}function acceptCookies(){$.cookie("zugarznap-cookies-accepted","1",{expires:365,path:"/"}),$("#cookie-policy").hide()}function clothingChangeProductImage(e){$("#id-card-clothing-details").css("background-image","url("+e+")")}function clotheProductSelectColor_Mobile(e){$(clotheProductOldColor).removeClass("active"),$("#clothe-product-color-desktop-"+e.value).addClass("active"),$("#clothe-product-color").val(e.value),$("#clothe-product-color-selected-desktop").text("Color: "+e.options[e.selectedIndex].innerHTML),clotheProductOldColor="#clothe-product-color-desktop-"+e.value}function clotheProductSelectColor_Desktop(e,t,o){$(clotheProductOldColor).removeClass("active"),$(e).addClass("active"),$("#clothe-product-color-mobile").val(t),$("#clothe-product-color").val(t),$("#clothe-product-color-selected-desktop").text("Color: "+o),clotheProductOldColor=e}function clotheProductSelectSize(e){$("#clothe-product-size-desktop").val(e.value),$("#clothe-product-size-mobile").val(e.value),$("#clothe-product-size").val(e.value)}function goBack(){window.history.back()}function goToGadgetInsurance(){goToPage("/insurance/gadget-cover/about")}function goHome(){goToPage("/")}function goSignIn(){goToPage("/auth/login")}function goToPage(e){window.location.href=e}function validateEmail(e){var t=new RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i);return t.test(e)}function showMessage(e,t){var o=$("#status-message");o.addClass("success"==e?successMsg:errorMsg).text(t).show()}function enabledButton(e){var t=$(e);setTimeout(function(){t.removeClass("disable"),t.prop("disabled",!1)},0)}function login(){$("#status-message").hide();var e=$("#login-input-email"),t=$("#login-input-password");return validateEmail(e.val())?t.val().length<8?(showMessage(errorMsg,"Password must be 8 characters or longer."),goToScroll("html, body",$("#status-message").offset().top,500),enabledButton("#login-input-submit"),!1):!0:(showMessage(errorMsg,"Email is not valid."),goToScroll("html, body",$("#status-message").offset().top,500),enabledButton("#login-input-submit"),!1)}function resetYourPassword(){$("#status-message").hide();var e=$("#pass-input-email");return validateEmail(e.val())?!0:(showMessage(errorMsg,"Email is not valid."),enabledButton("#pass-input-submit"),!1)}function getTextWidth(e){var t=$("#spanToCalculateTxtWidth___");return t.length||(t=$('<span id="spanToCalculateTxtWidth___" style="display: none;"></span>').prependTo("body")),t.html(e),t.width()}function alignToCenterSelectedOption(e,t){if(e.length){var o=e.width()+t;e.find("option").each(function(){for(;getTextWidth($(this).html())<o;)$(this).html("&nbsp;"+$(this).html()+"&nbsp;")})}}function register(){$("#status-message").hide();var e=$("#register-input-social-title"),t=$("#register-input-email"),o=$("#register-input-first-name"),n=$("#register-input-last-name"),i=$("#register-input-password"),a=$("#register-input-password_confirm"),r="#register-input-submit";return"-"==e.find(" option:selected").text()?(showMessage(errorMsg,"Please choose social title."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):o.val().length<1?(showMessage(errorMsg,"Please fill first name input."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):n.val().length<1?(showMessage(errorMsg,"Please fill last name input."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):validateEmail(t.val())?i.val().length<8?(showMessage(errorMsg,"Password must be 8 characters or longer."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):a.val().length<8?(showMessage(errorMsg,"Password confirm must be 8 characters or longer."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):i.val().length!=a.val().length||i.val()!=a.val()?(showMessage(errorMsg,"The Password confirmation does not match."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):!0:(showMessage(errorMsg,"Email is not valid."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1)}function resetInputPasswords(){$("#register-input-password").val(""),$("#register-input-password_confirm").val("")}function resendActivation(){$("#status-message").hide();var e=$("#resend-activation-input-email");return validateEmail(e.val())?!0:(showMessage(errorMsg,"Email is not valid."),goToScroll("html, body",$("#status-message").offset().top,500),enabledButton("#resend-activation-input-submit"),!1)}function validateClaimForm(){return createClaim()?!0:(enabledButton("#create-claim-submit"),claimsScrollableToErrorsMessages(),!1)}function createClaim(){var e=$("#create-claim-product"),t=$("#create-claim-was"),o=$("#create-claim-description"),n="#create-claim-files",i=".file-upload-input",a=$("#create-claim-username"),r=$("#create-claim-email"),s=$("#create-claim-contact-number"),l=5;if(0==e.val())return showMessage(errorMsg,"Please choose product."),!1;if(0==t.val())return showMessage(errorMsg,"Please choose the reason of the claim."),!1;if(o.val().length<1)return showMessage(errorMsg,"Please fill description claim input."),!1;if(o.val().length>5e3)return showMessage(errorMsg,"Please shorten description text to 5000 characters or less (you are currently using "+o.val().length+" characters)."),!1;if(a.val().length<1)return showMessage(errorMsg,"Please fill name input."),!1;if(r.val().length<1)return showMessage(errorMsg,"Please fill email input."),!1;if(!validateEmail(r.val()))return showMessage(errorMsg,"Email is not valid."),!1;if(null==s.val()||""==s.val())return showMessage(errorMsg,"Please fill your contact number."),!1;if(1!=BasketValidator.validateUKPhoneNumber(s.val()))return showMessage(errorMsg,"Contact number is not correct"),!1;if(s.val().length<1)return showMessage(errorMsg,"Please fill your phone number input."),!1;if($(n).prop("files").length<1)return showMessage(errorMsg,"Your claim cannot be sent without evidence of ownership. Please use the field below to add evidence."),!1;var c=[".jpg",".jpeg",".bmp",".png",".pdf",".doc"],d=validateFiles(n,c,l);return d.length>0?(showMessage(errorMsg,d.join(", \n")),$(n).wrap("<form>").closest("form").get(0).reset(),$(n).unwrap(),$(i).wrap("<form>").closest("form").get(0).reset(),$(i).unwrap(),!1):!0}function claimsScrollableToErrorsMessages(){var e=$(".mobile-intern-nav").height();goToScroll("html, body",e,1e3)}function scrollToElement(e,t){if(t=t||0,$("#"+e).length){var o=$("#"+e).offset();goToScroll("html, body",o.top+t,500)}}function validateFiles(e,t,o){for(var n,i=$(e).prop("files"),a=[],r=0;n=i[r];r++){if(!(n.size<1048576*o)){a.push("allowed maximum file size is "+o+"MB");break}if(!validateFileExtension(n,t)){a.push("invalid file format supplied");break}}return a}function validateFileExtension(e,t){for(var o=!1,n=0;n<t.length;n++){var i=t[n];if(e.name.substr(e.name.length-i.length,i.length).toLowerCase()==i.toLowerCase()){o=!0;break}}return o}function paymentSelectedCard(e,t){var o="#basket-payment-cardType",n="#basket-payment-cardType-img";$(o).val(e).trigger("change"),$(n).prop("src",t)}function goToScroll(e,t,o){$(e).animate({scrollTop:t},o)}function checkUKTelephone(e){var t=e+" ";if(1==t.length)return telNumberErrors[1];t.length=t.length-1;var o=/^(\+)[\s]*(.*)$/;if(1==o.test(t))return telNumberErrors[2];for(;-1!=t.indexOf(" ");)t=t.slice(0,t.indexOf(" "))+t.slice(t.indexOf(" ")+1);for(;-1!=t.indexOf("-");)t=t.slice(0,t.indexOf("-"))+t.slice(t.indexOf("-")+1);return o=/^[0-9]{10,11}$/,1!=o.test(t)?telNumberErrors[3]:!0}function InsuranceFormValidation(){this.init()}var CookiePolicy={init:function(){$("#cookie-policy img#cookie-policy-accept").click(CookiePolicy.close)},close:function(e){e.preventDefault,$("#cookie-policy").slideUp("fast")}},Menu={init:function(){Menu.adjust($(window).scrollTop(),Menu.getOffset()),$(window).scroll(function(){Menu.adjust($(this).scrollTop(),Menu.getOffset())})},adjust:function(e,t){var o=$("#main-navigation");e>t?(o.css("position","fixed"),o.css("top","0"),o.css("width","100%"),o.css("z-index","100000"),o.nextAll(":visible").first().css("margin-top",o.outerHeight())):(o.css("position","relative"),o.nextAll(":visible").first().css("margin-top","0"))},getOffset:function(){var e=0;return $(".slideshow-container").length&&(e=$(".slideshow-container").outerHeight()),$(".zz-cookie-policy").is(":visible")&&(e+=$(".zz-cookie-policy").outerHeight()),e}};$(document).ready(function(){CookiePolicy.init(),Menu.init(),Formz.init(),$('[data-toggle="tooltip"]').tooltip(),$(".date-picker").datetimepicker({format:"D/MM/YYYY",defaultDate:"now"})});var concreteTimeDisplayed=3e4,DatePickerUtils={toHumanDate:function(e){return"Today"}},isMobileDevice={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobileDevice.Android()||isMobileDevice.BlackBerry()||isMobileDevice.iOS()||isMobileDevice.Opera()||isMobileDevice.Windows()}},uiMessage={showInfoMessage:function(e,t,o,n,i){var a=$(e);a.hide(),$(t).html(o),n?a.stop().fadeIn(500).delay(0==i?5e3:i).fadeOut(500):a.stop().fadeIn(500)},closeInfoMessage:function(e){$(e).stop().fadeOut(250)}};mDigitsOnly={onlyDigits:function(){$(".input_digits_only").keydown(function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13])||65==e.keyCode&&(e.ctrlKey===!0||e.metaKey===!0)||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()})}},mElementAnimation={scrollToAnchor:function(){$(document).on("click",".anim-anchor",function(e){e.preventDefault();var t=$(this),o=t.attr("href");if("undefined"!=typeof o&&""!=o){var n=$(o).filter(":visible");if("undefined"!=typeof n){var i=n.offset().top-$("#main-navigation").outerHeight()+20;goToScroll("html, body",i+"px",500)}}})}},headerBlockVideo.prototype.actions=function(){var e=this,t=e.headerBlock.find(".top-label");e.headerBlock.click(function(){"undefined"!=typeof e.videoInHeaderObj&&(e.videoInHeaderObj.paused?(e.videoHeaderContainerOuter.addClass("playing"),e.videoHeaderContainerOuter.removeClass("paused"),e.videoInHeaderObj.play(),t.fadeOut()):(e.videoHeaderContainerOuter.addClass("paused"),e.videoHeaderContainerOuter.removeClass("playing"),e.videoInHeaderObj.pause(),t.fadeIn()))})},getMeCoveredSelects.prototype.actions=function(){var e=this;e.$getMeCoveredSelects.on("change",'[name="product_id"]',function(){e.$coverPriceOptionSelects.addClass("hidden"),$("#ds_"+$(this).val()).removeClass("hidden")})},postCodeDropDown.prototype.actions=function(){var e=this;e.$IinsurancePostCodeSelectContainer.on("DOMNodeInserted","select",function(){e.$postCodeSelect=e.$IinsurancePostCodeSelectContainer.find("#"+e.idOfSelect),e.$postCodeDropDown.html(""),e.$postCodeSelect.find("option").each(function(){e.$postCodeDropDown.append('<li><a data-value="'+$(this).val()+'">'+$(this).text()+"</a></li>").click()}),e.$postCodeDropDown.find("li:first a").trigger("click"),e.$IinsurancePostCodeSelectContainer.removeClass("hidden")}),e.$IinsurancePostCodeSelectContainer.on("change",'[name="postCodeDropDown"]',function(){var t=$(this).val(),o=document.getElementById(e.idOfSelect);if(e.$postCodeSelect.val(t).change(),"createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent("change",!1,!0),o.dispatchEvent(n)}else o.fireEvent("onchange")}),$(document).bind("DOMNodeRemoved",function(e){"____select_for____ILookForAddress"==$(e.target).attr("id")&&$("#IinsurancePostCodeSelectContainer").addClass("hidden")})},$(document).ready(function(){$(window).resize(function(){if(!$("#myNavmenu").is(":visible")){var e="body";$(e).removeAttr("style"),$(e).removeClass("canvas-slid"),$(e).css("padding-bottom","26px")}}),new headerBlockVideo,new dropDownSelect,new getMeCoveredSelects,mDigitsOnly.onlyDigits(),mElementAnimation.scrollToAnchor(),$(".trustpilot-container").click(function(){var e="https://uk.trustpilot.com/review/zugarznap.com",t=window.open(e,"_blank");t.focus()}),alignToCenterSelectedOption($("#register-input-social-title"),-27),$(".insurance-menu-item").on("click",function(){var e=$("#mobile-nav").is(":visible")?0:$("#stickynav").height();scrollToElement($(this).data("scroll"),-1*($(".insurance-steps").height()+e))}),$("#clothe-product-color-mobile").on("change",function(){clotheProductSelectColor_Mobile(this)}),$("#datetimepicker1").datetimepicker({minDate:moment().add("d",1).toDate(),allowInputToggle:!0,format:"YYYY-MM-DD"}),$(".datePickerTomorrow").datetimepicker({minDate:moment(new Date).add(1,"days").startOf("day"),maxDate:moment(new Date).add(1,"months").startOf("day"),allowInputToggle:!0,ignoreReadonly:!0,format:"DD/MM/YYYY"}),$("#price_option_id").on("change",function(){insuranceUpdatePrice()}),$(".insurance-submit").click(function(e){var t=$("#iam18"),o=$("#accept_terms"),n=$("#phone-number");if(!t.is(":checked")&&!o.is(":checked"))return $(".iam18-span").tooltip({trigger:"manual"}).tooltip("show"),$(".tc-span").tooltip({trigger:"manual"}).tooltip("show"),void e.preventDefault();if(!t.is(":checked"))return $(".iam18-span").tooltip({trigger:"manual"}).tooltip("show"),void e.preventDefault();if($(".iam18-span").tooltip("destroy"),!o.is(":checked"))return $(".tc-span").tooltip({trigger:"manual"}).tooltip("show"),void e.preventDefault();if($(".tc-span").tooltip("destroy"),$("#id-insurance-view-steps-error").remove(),null==n.val()||""==n.val())return n.prop("title","Please enter a phone number"),n.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1;var i=checkUKTelephone(n.val()),a=n.val().replace(/ /g,"");return 10==a.length||11==a.length&&1==i?void n.tooltip("destroy"):(n.prop("title",i),n.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1)}),$("#confirmDetails").on("click",function(){var e=!0,t=$("#price_option_id"),o=$("#pay_period"),n=$(".car-number"),i=$(".excess-date"),a=$(".email-field");if(null==t.val()||0!=t.val()&&""!=t.val()?t.tooltip("destroy"):(t.tooltip({trigger:"manual"}).tooltip("show"),e=!1),null==o.val()||0!=o.val()&&""!=o.val()?o.tooltip("destroy"):(o.tooltip({trigger:"manual"}).tooltip("show"),e=!1),null!=i.val()){var r=new Date,s=new Date(i.val());0==i.val()||""==i.val()||r>=s?(i.tooltip({trigger:"manual"}).tooltip("show"),e=!1):i.tooltip("destroy")}null==n.val()||0!=n.val()&&""!=n.val()?n.tooltip("destroy"):(n.tooltip({trigger:"manual"}).tooltip("show"),e=!1),null==a.val()||0!=a.val()&&""!=a.val()&&validateEmail(a.val())?a.tooltip("destroy"):(a.tooltip({trigger:"manual"}).tooltip("show"),e=!1),e&&($(".make_claim-container").removeClass("excess-steps").addClass("excess-container"),$("#insFormStep1").hide(),$("#insFormStep2").show())}),$("#backToDetails").on("click",function(){$(".make_claim-container").removeClass("excess-container").addClass("excess-steps"),$("#insFormStep2").hide(),$("#insFormStep1").show()}),$("#pay_period").on("change",function(){insuranceUpdatePrice()}),claimInfoSection.init();var e=$("#mobile-nav").offset().top+$("#mobile-nav").height();$(window).on("scroll",function(){if($("#mobile-nav").is(":visible")){var t=Math.round($(window).scrollTop());t>e?$(".insurance-new-steps").addClass("past-main"):$(".insurance-new-steps").removeClass("past-main")}})});var successMsg="zz-message zz-message-white",errorMsg="zz-error zz-error-white",claimInfoSection={init:function(){$("#id-claim-info-section-btn-open").click(function(e){e.preventDefault(),claimInfoSection.toggle()})},toggle:function(){$("#id-claim-info-section").hasClass("loading")?(setTimeout(function(){$("#id-claim-info-section").css("transform","translateX(0px)"),$("#id-claim-info-section").css("z-index",5)},200),$("#id-claim-info-section").show(),$("#id-claim-info-section").removeClass("loading")):($("#id-claim-info-section").addClass("loading"),$("#id-claim-info-section").addClass("dismissed"),$("#id-claim-info-section").css("transform","translateX(510px)"))}},Formz={init:function(){$("form").submit(function(){$(this).find('button[type="submit"]').attr("disabled","true").addClass("disable")})}},telNumberErrors=new Array;telNumberErrors[0]="Valid UK telephone number",telNumberErrors[1]="Telephone number not provided",telNumberErrors[2]="UK telephone number without the country code, please",telNumberErrors[3]="UK telephone numbers should contain 10 or 11 digits",telNumberErrors[4]="The telephone number should start with a 0",telNumberErrors[5]="The telephone number is either invalid or inappropriate",function(e){var t="undefined"!=typeof e("<input/>")[0].multiple,o=/msie/i.test(navigator.userAgent);e.fn.customFile=function(){return this.each(function(){var n=e(this).addClass("custom-file-upload-hidden"),i=e('<div class="file-upload-wrapper">'),a=e('<input type="text" class="file-upload-input" readonly/>'),r=e('<button type="button" class="file-upload-button"><img src="../../img/upload.png"></button>'),s=e('<label class="file-upload-button" for="'+n[0].id+'">Select a File</label>');n.css({position:"absolute",left:"-9999px"}),i.insertAfter(n).append(n,a,o?s:r),n.attr("tabIndex",-1),r.attr("tabIndex",-1),r.click(function(){n.focus().click()}),n.change(function(){var e,o,i=[];if(t){e=n[0].files;for(var r=0,s=e.length;s>r;r++)i.push(e[r].name);o=i.join(", ")}else o=n.val().split("\\").pop();a.val(o).attr("title",o).focus()}),a.on({blur:function(){n.trigger("blur")},keydown:function(e){if(13===e.which)o||n.trigger("click");else{if(8!==e.which&&46!==e.which)return 9===e.which?void 0:!1;n.replaceWith(n=n.clone(!0)),n.trigger("change"),a.val("")}}})})},t||e(document).on("change","input.customfile",function(){var t=e(this),o="customfile_"+(new Date).getTime(),n=t.parent(),i=n.siblings().find(".file-upload-input").filter(function(){return!this.value}),a=e('<input type="file" id="'+o+'" name="'+t.attr("name")+'"/>');setTimeout(function(){t.val()?i.length||(n.after(a),a.customFile()):(i.parent().remove(),n.appendTo(n.parent()),n.find("input").focus())},1)})}(jQuery),$("input[type=file]").customFile(),InsuranceFormValidation.prototype.init=function(){var e=this;$("#insuranceFormSubmit").click(function(t){var o=$("#carNumber"),n=$("#Idatetimepicker"),i=$("#email"),a=$("#first-name"),r=$("#last-name"),s=$("#IAddressPostcode"),l=$("#IAddress1"),c=$("#ITown"),d=$("#accept_terms"),u=$("#phone-number");return!o.length||null!=o.val()&&""!=o.val()?(o.tooltip("destroy"),null==n.val()||""==n.val()?(e.scrollToError(n),n.prop("title","Please fill date starting with tomorrow"),n.tooltip({trigger:"manual"}).tooltip("show"),t.preventDefault(),!1):(n.tooltip("destroy"),null==a.val()||""==a.val()?(e.scrollToError(a),a.prop("title","Please enter your first name"),a.tooltip({trigger:"manual"}).tooltip("show"),t.preventDefault(),!1):(a.tooltip("destroy"),null==r.val()||""==r.val()?(e.scrollToError(r),r.prop("title","Please enter your last name"),r.tooltip({trigger:"manual"}).tooltip("show"),t.preventDefault(),!1):(r.tooltip("destroy"),null==s.val()||""==s.val()?(e.scrollToError(s),s.prop("title","Please enter your postcode"),s.tooltip({trigger:"manual"}).tooltip("show"),t.preventDefault(),!1):(s.tooltip("destroy"),null==l.val()||""==l.val()?(e.scrollToError(l),l.prop("title","Please enter your address"),l.tooltip({trigger:"manual"}).tooltip("show"),t.preventDefault(),!1):(l.tooltip("destroy"),null==c.val()||""==c.val()?(e.scrollToError(c),c.prop("title","Please enter your town"),c.tooltip({trigger:"manual"}).tooltip("show"),t.preventDefault(),!1):(c.tooltip("destroy"),$("#id-insurance-view-steps-error").remove(),null==u.val()||""==u.val()?(e.scrollToError(u),u.prop("title","Please enter a phone number"),u.tooltip({trigger:"manual"}).tooltip("show"),t.preventDefault(),!1):BasketValidator.validateUKPhoneNumber(u.val())?(u.tooltip("destroy"),null!=i.val()&&""!=i.val()&&e.validateEmail(i.val())?(i.tooltip("destroy"),d.is(":checked")?void $(".tc-span").tooltip("destroy"):(e.scrollToError(d),$(".tc-span").tooltip({trigger:"manual"}).tooltip("show"),void t.preventDefault())):(e.scrollToError(i),i.prop("title","Please enter your email"),i.tooltip({trigger:"manual"}).tooltip("show"),t.preventDefault(),!1)):(e.scrollToError(u),u.prop("title","Phone number is not correct"),u.tooltip({trigger:"manual"}).tooltip("show"),t.preventDefault(),!1)))))))):(e.scrollToError(o),o.prop("title","Please enter vehicle registration number"),o.tooltip({trigger:"manual"}).tooltip("show"),t.preventDefault(),!1)});var t=$("#Idatetimepicker, #email, #first-name, #last-name, #IAddressPostcode, #IAddress1, #IAddress2, #ITown, #phone-number");t.click(function(){t.tooltip("destroy")})},InsuranceFormValidation.prototype.validateEmail=function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},InsuranceFormValidation.prototype.scrollToError=function(e){goToScroll("html, body",e.offset().top-$("#main-navigation").outerHeight()-100+"px",500)};var InsuranceUrlBuilder={init:function(){var e=window.location.href;null==InsuranceUrlBuilder.getParameterByName("step",e)&&InsuranceUrlBuilder.setPosition(1)},setPosition:function(e){var t=window.location.origin.concat(window.location.pathname)+"?step="+e,o=document.title;history.pushState?history.pushState(null,o,t):console.log("Your Browser will not Support HTML5")},getPosition:function(){InsuranceUrlBuilder.init();var e=window.location.href;return null!=InsuranceUrlBuilder.getParameterByName("step",e)?InsuranceUrlBuilder.getParameterByName("step",e):1},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=o.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},InsuranceDataBuilder={init:function(e,t,o){InsuranceDataBuilder.makeAjaxCall(e,t,o)},makeAjaxCall:function(e,t,o){$.ajax({method:"get",url:"/insurance-async",data:{insuranceId:e,steps:t},beforeSend:function(){console.log("async steps start")}}).done(function(e){InsuranceDataBuilder.populateSteps(e,o)}).fail(function(e){console.log(e)})},populateSteps:function(e,t){e.forEach(function(e){$("."+t+"-"+e.step).html(e.data)})},initForm:function(){$(".insurance-new-submit").click(function(e){if($(".mobile-intern-nav").is(":visible")){var t=$(".step-3").offset();goToScroll("html, body",t.top+45,500)}var o=$("#tempinceptiondate"),n=$("#email"),i=$("#first-name"),a=$("#last-name"),r=$("#IAddressPostcode"),s=$("#IAddress1"),l=$("#ITown"),c=$("#accept_terms"),d=$("#phone-number");return null==o.val()||""==o.val()?(o.prop("title","Please fill date starting with tomorrow"),o.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(o.tooltip("destroy"),null!=n.val()&&""!=n.val()&&InsuranceDataBuilder.validateEmail(n.val())?(n.tooltip("destroy"),null==i.val()||""==i.val()?(i.prop("title","Please enter your first name"),i.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(i.tooltip("destroy"),null==a.val()||""==a.val()?(a.prop("title","Please enter your last name"),a.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(a.tooltip("destroy"),null==r.val()||""==r.val()?(r.prop("title","Please enter your postcode"),r.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(r.tooltip("destroy"),null==s.val()||""==s.val()?(s.prop("title","Please enter your address"),s.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(s.tooltip("destroy"),null==l.val()||""==l.val()?(l.prop("title","Please enter your town"),l.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(l.tooltip("destroy"),$("#id-insurance-view-steps-error").remove(),null==d.val()||""==d.val()?(d.prop("title","Please enter a phone number"),d.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):BasketValidator.validateUKPhoneNumber(d.val())?(d.tooltip("destroy"),c.is(":checked")?void $(".tc-span").tooltip("destroy"):($(".tc-span").tooltip({trigger:"manual"}).tooltip("show"),void e.preventDefault())):(d.prop("title","Phone number is not correct"),d.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1))))))):(n.prop("title","Please enter your email"),n.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1))});var e=$("#tempinceptiondate, #email, #first-name, #last-name, #IAddressPostcode, #IAddress1, #IAddress2, #ITown, #phone-number");e.click(function(){e.tooltip("destroy")}),$("#Idatetimepicker").datetimepicker({minDate:moment(new Date).add(1,"days").startOf("day"),allowInputToggle:!0,ignoreReadonly:!0,format:"DD/MM/YYYY"});var t={address1:"IAddress1",address2:"IAddress2",town:"ITown"},o=document.getElementById("ILookForAddress"),n=document.getElementById("IAddressPostcode"),i=new _CraftyClicksForm(1);i.setForm(t),i.setElementToAppendSelectTo(document.getElementById("IinsurancePostCodeSelectContainer")),i.FrontSearch(o,n)},updateSomeViews:function(){var e=document.getElementById("bgvid");null!=e&&e.length&&e.exists()&&e.addEventListener("click",function(){e.paused&&e.play()},!1),$("#pay_period").on("change",function(){insuranceUpdatePrice(),InsuranceSwipeHandler.updateCurrentPagePosition()})},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}},InsuranceSwipeHandler={next:function(e,t){var o=e.getPos()+2;$("."+t+"-"+o).children().length>0&&e.next()},prev:function(e,t){var o=e.getPos()+1;$("."+t+"-"+o).children().length>0&&e.prev()},toPos:function(e,t,o){$("."+t+"-"+parseInt(o+1)).children().length>0&&e.slide(o,500)},updateCurrentPagePosition:function(){InsuranceSectionAnimation.sectionHeight("step-"+InsuranceUrlBuilder.getPosition())}};null!=document.getElementById("insuranceSwipe")&&($(window).resize(function(){InsuranceSwipeHandler.updateCurrentPagePosition()}),window.insuranceSwipe=new Swipe(document.getElementById("insuranceSwipe"),{startSlide:InsuranceUrlBuilder.getPosition()-1,callback:function(e,t){$("html, body").animate({scrollTop:0},0),InsuranceSectionAnimation.sectionHeight("step-"+parseInt(e+1))},transitionEnd:function(e,t){InsuranceUrlBuilder.setPosition(e+1),InsuranceSectionAnimation.init(),InsuranceSectionAnimation.initStickyWithIndex(e),InsuranceDataBuilder.initForm(),InsuranceDataBuilder.updateSomeViews()}}));var InsuranceSectionAnimation={init:function(){var e=$(".cd-intro"),t=e.height(),o=.6,n=1.5,i=320;InsuranceSectionAnimation.triggerAnimation(e,t,o,n,i),$(window).on("resize",function(){InsuranceSectionAnimation.triggerAnimation(e,t,o,n,i)}),InsuranceSectionAnimation.initStickyWithIndex(InsuranceUrlBuilder.getPosition()-1)},initStickyWithIndex:function(e){0==e?InsuranceSectionAnimation.initWithIdStickyBackground("insurance-steps-1","insurance-steps-background-red"):1==e&&InsuranceSectionAnimation.initWithIdStickyBackground("insurance-steps-2","insurance-steps-background-blue")},initWithIdStickyBackground:function(e,t){InsuranceSectionAnimation.handleRelativeSticky(e,t),window.onscroll=function(){InsuranceSectionAnimation.handleRelativeSticky(e,t)}},handleRelativeSticky:function(e,t){$(window).width()>=1700?InsuranceSectionAnimation.relative_sticky(e,115,600,t):$(window).width()>=992?InsuranceSectionAnimation.relative_sticky(e,70,400,t):InsuranceSectionAnimation.relative_sticky(e,0,400,t)},relative_sticky:function(e,t,o,n){var i=$("#"+e),a=parseFloat(document.getElementById(e).getBoundingClientRect().top),r=i.position().top;a-=r,a=-1*a,a+=t;var s=a;if(0!=$("#stickynav").find(".stickynav-row").length&&(s=a-t),
s>o&&3!=InsuranceUrlBuilder.getPosition()){if(i.hide(),0==$("#stickynav").find(".stickynav-row").length){var l="<div class='row stickynav-row "+n+" '>"+i.html()+"</div>";$("#stickynav").append(l),$("#mobile-nav").append(l)}}else i.show().removeClass(n),$(".stickynav-row").remove()},triggerAnimation:function(e,t,o,n,i){$(window).width()>=i?$(window).on("scroll",function(){window.requestAnimationFrame(function(){InsuranceSectionAnimation.animateIntro(e,t,o,n,i)})}):$(window).off("scroll")},animateIntro:function(e,t,o,n){var i=($(window).scrollTop()/t).toFixed(5),a=1-i*o;$(window).scrollTop()<t&&e.css({"-moz-transform":"scale("+a+") translateZ(0)","-webkit-transform":"scale("+a+") translateZ(0)","-ms-transform":"scale("+a+") translateZ(0)","-o-transform":"scale("+a+") translateZ(0)",transform:"scale("+a+") translateZ(0)",opacity:1-i*n})},sectionHeight:function(e){$(".swipe-wrap").height($("."+e).outerHeight())}};
=======
function addToCart(e,t){if($(".added-to-basket").hide(),"undefined"!=typeof e&&"undefined"!=typeof t){var o;if(t)o={id:e};else{$(".clothing-add-button").html("Processing..."),$(".clothing-add-button").attr("disabled","disabled").addClass("disable");var n=$("#clothe-product-quantity").val(),i=$("#clothe-product-color").val(),a=$("#clothe-product-size").val();if(""==n||""==i||0==i||""==a||0==a||"undefined"==typeof i||"undefined"==typeof a)return $(".clothing-add-button").html("Add to basket"),$(".clothing-add-button").removeAttr("disabled").removeClass("disable"),$(".added-to-basket").html('<span class="glyphicon glyphicon-remove"></span> Please select the desired color and size.').fadeIn("fast"),!1;o={id:e,quantity:n,attr:{color:i,size:a}}}$.ajax({url:"/basket/add",method:"post",data:o,beforeSend:function(){}}).done(function(e){1==e.status&&"undefined"!=typeof e.data.items_count?($(".basket-counter").text(e.data.items_count),$(".added-to-basket").html('<span class="glyphicon glyphicon-ok"></span> Added to basket').fadeIn("fast")):$(".added-to-basket").html('<span class="glyphicon glyphicon-remove"></span> There has been an error').fadeIn("fast")}).fail(function(e){$(".added-to-basket").html('<span class="glyphicon glyphicon-remove"></span> There has been an error').fadeIn("fast")}).always(function(){$(".clothing-add-button").html("Add to basket"),$(".clothing-add-button").removeAttr("disabled").removeClass("disable")})}}function destroyCart(){confirm("Are you sure?")&&$.ajax({url:"/basket/destroy",method:"get",beforeSend:function(){}}).done(function(e){1==e.status?($(".cart-count").text(0),showNotification("All the products have been removed from the cart.","body","success","top","right","auto",null,!0)):showNotification(e.data.error_message,"body","danger","top","right","auto",null,!0)}).fail(function(e){showNotification(e.data.error_message,"body","danger","top","right","auto",null,!0)}).always(function(){})}function showNotification(e,t,o,n,i,a,r,l){r=null==r?concreteTimeDisplayed:r,setTimeout(function(){$.bootstrapGrowl(e,{ele:t,type:o,offset:{from:n,amount:20},align:i,width:a,delay:r,allow_dismiss:l})},1e3)}function headerBlockVideo(){this.headerBlock=$("#headerBlock"),this.headerBlock.length&&(this.videoHeaderContainerOuter=this.headerBlock.find("#videoHeaderContainerOuter"),this.videoHeaderContainer=this.videoHeaderContainerOuter.find("#videoHeaderContainer"),this.videoHeaderPlayButton=this.videoHeaderContainerOuter.find("#videoHeaderPlayButton"),this.videoInHeader=this.videoHeaderContainerOuter.find("#videoHeader"),this.videoInHeaderObj=this.videoInHeader.get(0),this.actions())}function dropDownSelect(){$allDropDownSelects=$(".dropDownSelect"),$allDropDownSelects.on("click",".dropdown-menu li a",function(){$dropDownSelect=$(this).parents(".dropdown");var e=$(this).text(),t=$(this).data("value");$dropDownSelect.find(".dropdown-toggle").html(e),$dropDownSelect.find('[name="'+$dropDownSelect.data("name")+'"]').val(t).trigger("change")})}function getMeCoveredSelects(){this.$getMeCoveredSelects=$("#getMeCoveredSelects"),this.$getMeCoveredSelects.length&&(this.$coverPriceOptionSelects=this.$getMeCoveredSelects.find(".coverPriceOptionSelect"),this.actions())}function insuranceUpdatePrice(){var e=optionsPrice[$("#price_option_id").val()];if($("#pay_period").length)if("month"==$("#pay_period").val()){var t=parseFloat(70.5).toFixed(2),o=parseFloat((e-t)/11).toFixed(2);e='<span class="gold-color-txt inline-span">'+t+'</span> <span class="inline-span" style="color: #ffffff;">upfront and then 11 instalments equal to&nbsp;</span><span class="gold-color-txt inline-span">Â£'+o+"</span>"}else e=parseFloat(e).toFixed(0);$("#price_to_pay").html(e)}function acceptCookies(){$.cookie("zugarznap-cookies-accepted","1",{expires:365,path:"/"}),$("#cookie-policy").hide()}function clothingChangeProductImage(e){$("#id-card-clothing-details").css("background-image","url("+e+")")}function clotheProductSelectColor_Mobile(e){$(clotheProductOldColor).removeClass("active"),$("#clothe-product-color-desktop-"+e.value).addClass("active"),$("#clothe-product-color").val(e.value),$("#clothe-product-color-selected-desktop").text("Color: "+e.options[e.selectedIndex].innerHTML),clotheProductOldColor="#clothe-product-color-desktop-"+e.value}function clotheProductSelectColor_Desktop(e,t,o){$(clotheProductOldColor).removeClass("active"),$(e).addClass("active"),$("#clothe-product-color-mobile").val(t),$("#clothe-product-color").val(t),$("#clothe-product-color-selected-desktop").text("Color: "+o),clotheProductOldColor=e}function clotheProductSelectSize(e){$("#clothe-product-size-desktop").val(e.value),$("#clothe-product-size-mobile").val(e.value),$("#clothe-product-size").val(e.value)}function goBack(){window.history.back()}function goHome(){goToPage("/")}function goSignIn(){goToPage("/auth/login")}function goToPage(e){window.location.href=e}function validateEmail(e){var t=new RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i);return t.test(e)}function showMessage(e,t){var o=$("#status-message");o.addClass("success"==e?successMsg:errorMsg).text(t).show()}function enabledButton(e){var t=$(e);setTimeout(function(){t.removeClass("disable"),t.prop("disabled",!1)},0)}function login(){$("#status-message").hide();var e=$("#login-input-email"),t=$("#login-input-password");return validateEmail(e.val())?t.val().length<8?(showMessage(errorMsg,"Password must be 8 characters or longer."),goToScroll("html, body",$("#status-message").offset().top,500),enabledButton("#login-input-submit"),!1):!0:(showMessage(errorMsg,"Email is not valid."),goToScroll("html, body",$("#status-message").offset().top,500),enabledButton("#login-input-submit"),!1)}function resetYourPassword(){$("#status-message").hide();var e=$("#pass-input-email");return validateEmail(e.val())?!0:(showMessage(errorMsg,"Email is not valid."),enabledButton("#pass-input-submit"),!1)}function getTextWidth(e){var t=$("#spanToCalculateTxtWidth___");return t.length||(t=$('<span id="spanToCalculateTxtWidth___" style="display: none;"></span>').prependTo("body")),t.html(e),t.width()}function alignToCenterSelectedOption(e,t){if(e.length){var o=e.width()+t;e.find("option").each(function(){for(;getTextWidth($(this).html())<o;)$(this).html("&nbsp;"+$(this).html()+"&nbsp;")})}}function register(){$("#status-message").hide();var e=$("#register-input-social-title"),t=$("#register-input-email"),o=$("#register-input-first-name"),n=$("#register-input-last-name"),i=$("#register-input-password"),a=$("#register-input-password_confirm"),r="#register-input-submit";return"-"==e.find(" option:selected").text()?(showMessage(errorMsg,"Please choose social title."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):validateEmail(t.val())?o.val().length<1?(showMessage(errorMsg,"Please fill first name input."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):n.val().length<1?(showMessage(errorMsg,"Please fill last name input."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):i.val().length<8?(showMessage(errorMsg,"Password must be 8 characters or longer."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):a.val().length<8?(showMessage(errorMsg,"Password confirm must be 8 characters or longer."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):i.val().length!=a.val().length||i.val()!=a.val()?(showMessage(errorMsg,"The Password confirmation does not match."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1):!0:(showMessage(errorMsg,"Email is not valid."),goToScroll("html, body",$("#status-message").offset().top,500),resetInputPasswords(),enabledButton(r),!1)}function resetInputPasswords(){$("#register-input-password").val(""),$("#register-input-password_confirm").val("")}function validateClaimForm(){return createClaim()?!0:(enabledButton("#create-claim-submit"),claimsScrollableToErrorsMessages(),!1)}function createClaim(){var e=$("#create-claim-product"),t=$("#create-claim-was"),o=$("#create-claim-description"),n="#create-claim-files",i=".file-upload-input",a=$("#create-claim-username"),r=$("#create-claim-email"),l=$("#create-claim-contact-number"),s=5;if(0==e.val())return showMessage(errorMsg,"Please choose product."),!1;if(0==t.val())return showMessage(errorMsg,"Please choose the reason of the claim."),!1;if(o.val().length<1)return showMessage(errorMsg,"Please fill description claim input."),!1;if(o.val().length>5e3)return showMessage(errorMsg,"Please shorten description text to 5000 characters or less (you are currently using "+o.val().length+" characters)."),!1;if(a.val().length<1)return showMessage(errorMsg,"Please fill name input."),!1;if(r.val().length<1)return showMessage(errorMsg,"Please fill email input."),!1;if(!validateEmail(r.val()))return showMessage(errorMsg,"Email is not valid."),!1;if(null==l.val()||""==l.val())return showMessage(errorMsg,"Please fill your contact number."),!1;if(1!=BasketValidator.validateUKPhoneNumber(l.val()))return showMessage(errorMsg,"Contact number is not correct"),!1;if(l.val().length<1)return showMessage(errorMsg,"Please fill your phone number input."),!1;if($(n).prop("files").length<1)return showMessage(errorMsg,"Your claim cannot be sent without evidence of ownership. Please use the field below to add evidence."),!1;var c=[".jpg",".jpeg",".bmp",".png",".pdf",".doc"],d=validateFiles(n,c,s);return d.length>0?(showMessage(errorMsg,d.join(", \n")),$(n).wrap("<form>").closest("form").get(0).reset(),$(n).unwrap(),$(i).wrap("<form>").closest("form").get(0).reset(),$(i).unwrap(),!1):!0}function claimsScrollableToErrorsMessages(){var e=$(".mobile-intern-nav").height();goToScroll("html, body",e,1e3)}function scrollToElement(e,t){if(t=t||0,$("#"+e).length){var o=$("#"+e).offset();goToScroll("html, body",o.top+t,500)}}function validateFiles(e,t,o){for(var n,i=$(e).prop("files"),a=[],r=0;n=i[r];r++){if(!(n.size<1048576*o)){a.push("allowed maximum file size is "+o+"MB");break}if(!validateFileExtension(n,t)){a.push("invalid file format supplied");break}}return a}function validateFileExtension(e,t){for(var o=!1,n=0;n<t.length;n++){var i=t[n];if(e.name.substr(e.name.length-i.length,i.length).toLowerCase()==i.toLowerCase()){o=!0;break}}return o}function paymentSelectedCard(e,t){var o="#basket-payment-cardType",n="#basket-payment-cardType-img";$(o).val(e).trigger("change"),$(n).prop("src",t)}function goToScroll(e,t,o){$(e).animate({scrollTop:t},o)}function checkUKTelephone(e){var t=e+" ";if(1==t.length)return telNumberErrors[1];t.length=t.length-1;var o=/^(\+)[\s]*(.*)$/;if(1==o.test(t))return telNumberErrors[2];for(;-1!=t.indexOf(" ");)t=t.slice(0,t.indexOf(" "))+t.slice(t.indexOf(" ")+1);for(;-1!=t.indexOf("-");)t=t.slice(0,t.indexOf("-"))+t.slice(t.indexOf("-")+1);return o=/^[0-9]{10,11}$/,1!=o.test(t)?telNumberErrors[3]:!0}var CookiePolicy={init:function(){$("#cookie-policy img#cookie-policy-accept").click(CookiePolicy.close)},close:function(e){e.preventDefault,$("#cookie-policy").slideUp("fast")}},Menu={init:function(){Menu.adjust($(window).scrollTop(),Menu.getOffset()),$(window).scroll(function(){Menu.adjust($(this).scrollTop(),Menu.getOffset())})},adjust:function(e,t){var o=$("#main-navigation");e>t?(o.css("position","fixed"),o.css("top","0"),o.css("width","100%"),o.css("z-index","100000"),o.nextAll(":visible").first().css("margin-top",o.outerHeight())):(o.css("position","relative"),o.nextAll(":visible").first().css("margin-top","0"))},getOffset:function(){var e=0;return $(".slideshow-container").length&&(e=$(".slideshow-container").outerHeight()),$(".zz-cookie-policy").is(":visible")&&(e+=$(".zz-cookie-policy").outerHeight()),e}};$(document).ready(function(){CookiePolicy.init(),Menu.init(),Formz.init(),$('[data-toggle="tooltip"]').tooltip(),$(".date-picker").datetimepicker({format:"D/MM/YYYY",defaultDate:"now"})});var concreteTimeDisplayed=3e4,DatePickerUtils={toHumanDate:function(e){return"Today"}},isMobileDevice={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobileDevice.Android()||isMobileDevice.BlackBerry()||isMobileDevice.iOS()||isMobileDevice.Opera()||isMobileDevice.Windows()}},uiMessage={showInfoMessage:function(e,t,o,n,i){var a=$(e);a.hide(),$(t).html(o),n?a.stop().fadeIn(500).delay(0==i?5e3:i).fadeOut(500):a.stop().fadeIn(500)},closeInfoMessage:function(e){$(e).stop().fadeOut(250)}};mDigitsOnly={onlyDigits:function(){$(".input_digits_only").keydown(function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13])||65==e.keyCode&&(e.ctrlKey===!0||e.metaKey===!0)||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()})}},mElementAnimation={scrollToAnchor:function(){$(document).on("click",".anim-anchor",function(e){e.preventDefault();var t=$(this),o=t.attr("href");if("undefined"!=typeof o&&""!=o){var n=$(o).filter(":visible");if("undefined"!=typeof n){var i=n.offset().top-$("#main-navigation").outerHeight()+20;goToScroll("html, body",i+"px",500)}}})}},headerBlockVideo.prototype.actions=function(){var e=this;e.headerBlock.click(function(){"undefined"!=typeof e.videoInHeaderObj&&(e.videoInHeaderObj.paused?(e.videoHeaderContainerOuter.addClass("playing"),e.videoHeaderContainerOuter.removeClass("paused"),e.videoInHeaderObj.play()):(e.videoHeaderContainerOuter.addClass("paused"),e.videoHeaderContainerOuter.removeClass("playing"),e.videoInHeaderObj.pause()))})},getMeCoveredSelects.prototype.actions=function(){var e=this;e.$getMeCoveredSelects.on("change",'[name="product_id"]',function(){e.$coverPriceOptionSelects.addClass("hidden"),$("#ds_"+$(this).val()).removeClass("hidden")})},$(document).ready(function(){$(window).resize(function(){if(!$("#myNavmenu").is(":visible")){var e="body";$(e).removeAttr("style"),$(e).removeClass("canvas-slid"),$(e).css("padding-bottom","26px")}}),new headerBlockVideo,new dropDownSelect,new getMeCoveredSelects,mDigitsOnly.onlyDigits(),mElementAnimation.scrollToAnchor(),$(".trustpilot-container").click(function(){var e="https://uk.trustpilot.com/review/zugarznap.com",t=window.open(e,"_blank");t.focus()}),alignToCenterSelectedOption($("#register-input-social-title"),-27),$(".insurance-menu-item").on("click",function(){var e=$("#mobile-nav").is(":visible")?0:$("#stickynav").height();scrollToElement($(this).data("scroll"),-1*($(".insurance-steps").height()+e))}),$("#clothe-product-color-mobile").on("change",function(){clotheProductSelectColor_Mobile(this)}),$("#datetimepicker1").datetimepicker({minDate:moment().add("d",1).toDate(),allowInputToggle:!0,format:"YYYY-MM-DD"}),$(".datePickerTomorrow").datetimepicker({minDate:moment(new Date).add(1,"days").startOf("day"),allowInputToggle:!0,ignoreReadonly:!0,format:"DD/MM/YYYY"}),$("#price_option_id").on("change",function(){insuranceUpdatePrice()}),$(".insurance-submit").click(function(e){var t=$("#iam18"),o=$("#accept_terms"),n=$("#phone-number");if(!t.is(":checked")&&!o.is(":checked"))return $(".iam18-span").tooltip({trigger:"manual"}).tooltip("show"),$(".tc-span").tooltip({trigger:"manual"}).tooltip("show"),void e.preventDefault();if(!t.is(":checked"))return $(".iam18-span").tooltip({trigger:"manual"}).tooltip("show"),void e.preventDefault();if($(".iam18-span").tooltip("destroy"),!o.is(":checked"))return $(".tc-span").tooltip({trigger:"manual"}).tooltip("show"),void e.preventDefault();if($(".tc-span").tooltip("destroy"),$("#id-insurance-view-steps-error").remove(),null==n.val()||""==n.val())return n.prop("title","Please enter a phone number"),n.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1;var i=checkUKTelephone(n.val()),a=n.val().replace(/ /g,"");return 10==a.length||11==a.length&&1==i?void n.tooltip("destroy"):(n.prop("title",i),n.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1)}),$("#confirmDetails").on("click",function(){var e=!0,t=$("#price_option_id"),o=$("#pay_period"),n=$(".car-number"),i=$(".excess-date"),a=$(".email-field");if(null==t.val()||0!=t.val()&&""!=t.val()?t.tooltip("destroy"):(t.tooltip({trigger:"manual"}).tooltip("show"),e=!1),null==o.val()||0!=o.val()&&""!=o.val()?o.tooltip("destroy"):(o.tooltip({trigger:"manual"}).tooltip("show"),e=!1),null!=i.val()){var r=new Date,l=new Date(i.val());0==i.val()||""==i.val()||r>=l?(i.tooltip({trigger:"manual"}).tooltip("show"),e=!1):i.tooltip("destroy")}null==n.val()||0!=n.val()&&""!=n.val()?n.tooltip("destroy"):(n.tooltip({trigger:"manual"}).tooltip("show"),e=!1),null==a.val()||0!=a.val()&&""!=a.val()&&validateEmail(a.val())?a.tooltip("destroy"):(a.tooltip({trigger:"manual"}).tooltip("show"),e=!1),e&&($(".make_claim-container").removeClass("excess-steps").addClass("excess-container"),$("#insFormStep1").hide(),$("#insFormStep2").show())}),$("#backToDetails").on("click",function(){$(".make_claim-container").removeClass("excess-container").addClass("excess-steps"),$("#insFormStep2").hide(),$("#insFormStep1").show()}),$("#pay_period").on("change",function(){insuranceUpdatePrice()}),claimInfoSection.init()});var successMsg="zz-message zz-message-white",errorMsg="zz-error zz-error-white",claimInfoSection={init:function(){$("#id-claim-info-section-btn-open").click(function(e){e.preventDefault(),claimInfoSection.toggle()})},toggle:function(){$("#id-claim-info-section").hasClass("loading")?(setTimeout(function(){$("#id-claim-info-section").css("transform","translateX(0px)"),$("#id-claim-info-section").css("z-index",5)},200),$("#id-claim-info-section").show(),$("#id-claim-info-section").removeClass("loading")):($("#id-claim-info-section").addClass("loading"),$("#id-claim-info-section").addClass("dismissed"),$("#id-claim-info-section").css("transform","translateX(510px)"))}},Formz={init:function(){$("form").submit(function(){$(this).find('button[type="submit"]').attr("disabled","true").addClass("disable")})}},telNumberErrors=new Array;telNumberErrors[0]="Valid UK telephone number",telNumberErrors[1]="Telephone number not provided",telNumberErrors[2]="UK telephone number without the country code, please",telNumberErrors[3]="UK telephone numbers should contain 10 or 11 digits",telNumberErrors[4]="The telephone number should start with a 0",telNumberErrors[5]="The telephone number is either invalid or inappropriate",function(e){var t="undefined"!=typeof e("<input/>")[0].multiple,o=/msie/i.test(navigator.userAgent);e.fn.customFile=function(){return this.each(function(){var n=e(this).addClass("custom-file-upload-hidden"),i=e('<div class="file-upload-wrapper">'),a=e('<input type="text" class="file-upload-input" readonly/>'),r=e('<button type="button" class="file-upload-button"><img src="../../img/upload.png"></button>'),l=e('<label class="file-upload-button" for="'+n[0].id+'">Select a File</label>');n.css({position:"absolute",left:"-9999px"}),i.insertAfter(n).append(n,a,o?l:r),n.attr("tabIndex",-1),r.attr("tabIndex",-1),r.click(function(){n.focus().click()}),n.change(function(){var e,o,i=[];if(t){e=n[0].files;for(var r=0,l=e.length;l>r;r++)i.push(e[r].name);o=i.join(", ")}else o=n.val().split("\\").pop();a.val(o).attr("title",o).focus()}),a.on({blur:function(){n.trigger("blur")},keydown:function(e){if(13===e.which)o||n.trigger("click");else{if(8!==e.which&&46!==e.which)return 9===e.which?void 0:!1;n.replaceWith(n=n.clone(!0)),n.trigger("change"),a.val("")}}})})},t||e(document).on("change","input.customfile",function(){var t=e(this),o="customfile_"+(new Date).getTime(),n=t.parent(),i=n.siblings().find(".file-upload-input").filter(function(){return!this.value}),a=e('<input type="file" id="'+o+'" name="'+t.attr("name")+'"/>');setTimeout(function(){t.val()?i.length||(n.after(a),a.customFile()):(i.parent().remove(),n.appendTo(n.parent()),n.find("input").focus())},1)})}(jQuery),$("input[type=file]").customFile();var InsuranceFormValidation={init:function(){$("#insuranceFormSubmit").click(function(e){var t=$("#carNumber"),o=$("#Idatetimepicker"),n=$("#email"),i=$("#first-name"),a=$("#last-name"),r=$("#IAddressPostcode"),l=$("#IAddress1"),s=$("#ITown"),c=$("#accept_terms"),d=$("#phone-number");return!t.length||null!=t.val()&&""!=t.val()?(t.tooltip("destroy"),null==o.val()||""==o.val()?(o.prop("title","Please fill date starting with tomorrow"),o.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(o.tooltip("destroy"),null==i.val()||""==i.val()?(i.prop("title","Please enter your first name"),i.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(i.tooltip("destroy"),null==a.val()||""==a.val()?(a.prop("title","Please enter your last name"),a.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(a.tooltip("destroy"),null==r.val()||""==r.val()?(r.prop("title","Please enter your postcode"),r.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(r.tooltip("destroy"),null==l.val()||""==l.val()?(l.prop("title","Please enter your address"),l.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(l.tooltip("destroy"),null==s.val()||""==s.val()?(s.prop("title","Please enter your town"),s.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(s.tooltip("destroy"),$("#id-insurance-view-steps-error").remove(),null==d.val()||""==d.val()?(d.prop("title","Please enter a phone number"),d.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):BasketValidator.validateUKPhoneNumber(d.val())?(d.tooltip("destroy"),null!=n.val()&&""!=n.val()&&InsuranceFormValidation.validateEmail(n.val())?(n.tooltip("destroy"),c.is(":checked")?void $(".tc-span").tooltip("destroy"):($(".tc-span").tooltip({trigger:"manual"}).tooltip("show"),void e.preventDefault())):(n.prop("title","Please enter your email"),n.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1)):(d.prop("title","Phone number is not correct"),d.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1)))))))):(t.prop("title","Please enter vehicle registration number"),t.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1)});var e=$("#Idatetimepicker, #email, #first-name, #last-name, #IAddressPostcode, #IAddress1, #IAddress2, #ITown, #phone-number");e.click(function(){e.tooltip("destroy")})},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}},InsuranceUrlBuilder={init:function(){var e=window.location.href;null==InsuranceUrlBuilder.getParameterByName("step",e)&&InsuranceUrlBuilder.setPosition(1)},setPosition:function(e){var t=window.location.origin.concat(window.location.pathname)+"?step="+e,o=document.title;history.pushState?history.pushState(null,o,t):console.log("Your Browser will not Support HTML5")},getPosition:function(){InsuranceUrlBuilder.init();var e=window.location.href;return null!=InsuranceUrlBuilder.getParameterByName("step",e)?InsuranceUrlBuilder.getParameterByName("step",e):1},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=o.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},InsuranceDataBuilder={init:function(e,t,o){InsuranceDataBuilder.makeAjaxCall(e,t,o)},makeAjaxCall:function(e,t,o){$.ajax({method:"get",url:"/insurance-async",data:{insuranceId:e,steps:t},beforeSend:function(){console.log("async steps start")}}).done(function(e){InsuranceDataBuilder.populateSteps(e,o)}).fail(function(e){console.log(e)})},populateSteps:function(e,t){e.forEach(function(e){$("."+t+"-"+e.step).html(e.data)})},initForm:function(){$(".insurance-new-submit").click(function(e){if($(".mobile-intern-nav").is(":visible")){var t=$(".step-3").offset();goToScroll("html, body",t.top+45,500)}var o=$("#tempinceptiondate"),n=$("#email"),i=$("#first-name"),a=$("#last-name"),r=$("#IAddressPostcode"),l=$("#IAddress1"),s=$("#ITown"),c=$("#accept_terms"),d=$("#phone-number");return null==o.val()||""==o.val()?(o.prop("title","Please fill date starting with tomorrow"),o.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(o.tooltip("destroy"),null!=n.val()&&""!=n.val()&&InsuranceDataBuilder.validateEmail(n.val())?(n.tooltip("destroy"),null==i.val()||""==i.val()?(i.prop("title","Please enter your first name"),i.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(i.tooltip("destroy"),null==a.val()||""==a.val()?(a.prop("title","Please enter your last name"),a.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(a.tooltip("destroy"),null==r.val()||""==r.val()?(r.prop("title","Please enter your postcode"),r.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(r.tooltip("destroy"),null==l.val()||""==l.val()?(l.prop("title","Please enter your address"),l.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(l.tooltip("destroy"),null==s.val()||""==s.val()?(s.prop("title","Please enter your town"),s.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):(s.tooltip("destroy"),$("#id-insurance-view-steps-error").remove(),null==d.val()||""==d.val()?(d.prop("title","Please enter a phone number"),d.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1):BasketValidator.validateUKPhoneNumber(d.val())?(d.tooltip("destroy"),c.is(":checked")?void $(".tc-span").tooltip("destroy"):($(".tc-span").tooltip({trigger:"manual"}).tooltip("show"),void e.preventDefault())):(d.prop("title","Phone number is not correct"),d.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1))))))):(n.prop("title","Please enter your email"),n.tooltip({trigger:"manual"}).tooltip("show"),e.preventDefault(),!1))});var e=$("#tempinceptiondate, #email, #first-name, #last-name, #IAddressPostcode, #IAddress1, #IAddress2, #ITown, #phone-number");e.click(function(){e.tooltip("destroy")}),$("#Idatetimepicker").datetimepicker({minDate:moment(new Date).add(1,"days").startOf("day"),allowInputToggle:!0,ignoreReadonly:!0,format:"DD/MM/YYYY"});var t={address1:"IAddress1",address2:"IAddress2",town:"ITown"},o=document.getElementById("ILookForAddress"),n=document.getElementById("IAddressPostcode"),i=new _CraftyClicksForm(1);i.setForm(t),i.setElementToAppendSelectTo(document.getElementById("IinsurancePostCodeSelectContainer")),i.FrontSearch(o,n)},updateSomeViews:function(){var e=document.getElementById("bgvid");null!=e&&e.length&&e.exists()&&e.addEventListener("click",function(){e.paused&&e.play()},!1),$("#pay_period").on("change",function(){insuranceUpdatePrice(),InsuranceSwipeHandler.updateCurrentPagePosition()})},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}},InsuranceSwipeHandler={next:function(e,t){var o=e.getPos()+2;$("."+t+"-"+o).children().length>0&&e.next()},prev:function(e,t){var o=e.getPos()+1;$("."+t+"-"+o).children().length>0&&e.prev()},toPos:function(e,t,o){$("."+t+"-"+parseInt(o+1)).children().length>0&&e.slide(o,500)},updateCurrentPagePosition:function(){InsuranceSectionAnimation.sectionHeight("step-"+InsuranceUrlBuilder.getPosition())}};null!=document.getElementById("insuranceSwipe")&&($(window).resize(function(){InsuranceSwipeHandler.updateCurrentPagePosition()}),window.insuranceSwipe=new Swipe(document.getElementById("insuranceSwipe"),{startSlide:InsuranceUrlBuilder.getPosition()-1,callback:function(e,t){$("html, body").animate({scrollTop:0},0),InsuranceSectionAnimation.sectionHeight("step-"+parseInt(e+1))},transitionEnd:function(e,t){InsuranceUrlBuilder.setPosition(e+1),InsuranceSectionAnimation.init(),InsuranceSectionAnimation.initStickyWithIndex(e),InsuranceDataBuilder.initForm(),InsuranceDataBuilder.updateSomeViews()}}));var InsuranceSectionAnimation={init:function(){var e=$(".cd-intro"),t=e.height(),o=.6,n=1.5,i=320;InsuranceSectionAnimation.triggerAnimation(e,t,o,n,i),$(window).on("resize",function(){InsuranceSectionAnimation.triggerAnimation(e,t,o,n,i)}),InsuranceSectionAnimation.initStickyWithIndex(InsuranceUrlBuilder.getPosition()-1)},initStickyWithIndex:function(e){0==e?InsuranceSectionAnimation.initWithIdStickyBackground("insurance-steps-1","insurance-steps-background-red"):1==e&&InsuranceSectionAnimation.initWithIdStickyBackground("insurance-steps-2","insurance-steps-background-blue")},initWithIdStickyBackground:function(e,t){InsuranceSectionAnimation.handleRelativeSticky(e,t),window.onscroll=function(){InsuranceSectionAnimation.handleRelativeSticky(e,t)}},handleRelativeSticky:function(e,t){$(window).width()>=1700?InsuranceSectionAnimation.relative_sticky(e,115,600,t):$(window).width()>=992?InsuranceSectionAnimation.relative_sticky(e,70,400,t):InsuranceSectionAnimation.relative_sticky(e,0,400,t)},relative_sticky:function(e,t,o,n){var i=$("#"+e),a=parseFloat(document.getElementById(e).getBoundingClientRect().top),r=i.position().top;a-=r,a=-1*a,a+=t;var l=a;if(0!=$("#stickynav").find(".stickynav-row").length&&(l=a-t),l>o&&3!=InsuranceUrlBuilder.getPosition()){if(i.hide(),0==$("#stickynav").find(".stickynav-row").length){var s="<div class='row stickynav-row "+n+" '>"+i.html()+"</div>";$("#stickynav").append(s),$("#mobile-nav").append(s)}}else i.show().removeClass(n),$(".stickynav-row").remove()},triggerAnimation:function(e,t,o,n,i){$(window).width()>=i?$(window).on("scroll",function(){window.requestAnimationFrame(function(){InsuranceSectionAnimation.animateIntro(e,t,o,n,i)})}):$(window).off("scroll")},animateIntro:function(e,t,o,n){var i=($(window).scrollTop()/t).toFixed(5),a=1-i*o;$(window).scrollTop()<t&&e.css({"-moz-transform":"scale("+a+") translateZ(0)","-webkit-transform":"scale("+a+") translateZ(0)","-ms-transform":"scale("+a+") translateZ(0)","-o-transform":"scale("+a+") translateZ(0)",transform:"scale("+a+") translateZ(0)",opacity:1-i*n})},sectionHeight:function(e){$(".swipe-wrap").height($("."+e).outerHeight())}};
>>>>>>> test
